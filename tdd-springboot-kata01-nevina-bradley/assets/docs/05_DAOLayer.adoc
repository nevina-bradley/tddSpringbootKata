= Spring Boot - the repository (DAO) layer
:toc:
:toclevels: 4

Building the *data access layer* (DAO) and its unit tests

== The Repository DAO Layer
Spring Data JPA takes care of most of the data access layer. +

```
src/
└── main/
    └── java/
        └── com/
            └── codedifferently/
                └── phonebook/
                    └── widgets/
                        └── models/
                            └── repos/
                                └── WidgetRepo.java

```

. Most CRUD operations are supplied by the parent interface `JpaRepository` from Spring
(`org.springframework.data.jpa.repository` package) +
.. The `JpaRepository` extends the `PagingAndSortingRepository` which extends the `CrudRepository`.

. Custom finder methods +
.. In addition to the available-by-default CRUD operations, custom methods can be added. In the
`WidgetRepo`, a `findWidgetByName` operation is a custom find operation.
.. Constructing such custom operations requires a deeper understanding of how query methods are
generated by *Spring Data JPA*.
.. Refer to the
link:http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation[Spring documentation]
to read up on other phrases that JPA can use for database access.

. Using named queries +
.. A named query is an operation where a custom query is annotated using a `@Query` annotation.

NOTE: The named query uses Java class and field names, rather than database table and column names.

== Exercise Lab

image:../../assets/images/labtime.png[Lab, align="center"]

. Create a new interface `PersonRepo`
```
src/
└── main/
    └── java/
        └── com/
            └── codedifferently/
                └── phonebook/
                    └── people/
                        └── repos/
                            └── PersonRepo.java

```
. Create the methods(s):
.. `List<Person> findByLastName` - To do a search by last name.



[width=100%, cols="<10%,^80%,>10%",grid=none,frame=ends]
|===
| Prev | TOC | Next

| link:04_ModelLayer.adoc[Working with the Model layer]
| link:TableOfContents.adoc[TOC]
| link:06_Exceptions.adoc[Working with Exceptions]
|===
